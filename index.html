<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wu(æ‚Ÿ)Book - é”™é¢˜æœ¬</title>
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <header class="app-header">
        <h1>Wu(æ‚Ÿ)Book</h1>
        <p class="tagline">A light-weight error book to help your child grow through mistakes.</p>
    </header>

    <main class="layout" id="layout">
        <section class="panel" id="entry-panel" aria-labelledby="entry-form-title" hidden>
            <div class="panel-header">
                <div class="panel-header__top">
                    <h2 id="entry-form-title">æ–°çš„é”™é¢˜</h2>
                    <a href="#" id="close-entry-panel" class="panel-link">è¿”å›é”™é¢˜åˆ—è¡¨</a>
                </div>
                <p>Add mistakes as they happen to keep everything organised.</p>
            </div>
            <form id="entry-form" class="form-grid">
                <label class="field">
                    <span>æ¥æº</span>
                    <input type="text" id="source" name="source" placeholder="æ•™æã€è¯•å·ç­‰" />
                </label>
                <label class="field">
                    <span>å­¦ç§‘</span>
                    <input type="text" id="subject" name="subject" list="subject-options" placeholder="æ•°å­¦ã€è‹±è¯­â€¦" />
                </label>
                <label class="field">
                    <span>å­¦æœŸ</span>
                    <select id="semester" name="semester">
                        <option value="">è¯·é€‰æ‹©</option>
                        <option value="å…«ä¸Š">å…«ä¸Š</option>
                        <option value="å…«ä¸‹">å…«ä¸‹</option>
                        <option value="ä¹ä¸Š">ä¹ä¸Š</option>
                        <option value="ä¹ä¸‹">ä¹ä¸‹</option>
                    </select>
                </label>
                <label class="field">
                    <span>é¢˜ç›®ç±»å‹</span>
                    <input type="text" id="question-type" name="questionType" placeholder="é€‰æ‹©é¢˜ã€å¡«ç©ºé¢˜â€¦" />
                </label>
                <label class="field">
                    <span>åˆ›å»ºæ—¥æœŸ</span>
                    <input type="date" id="created-at" name="createdAt" />
                </label>
                <label class="field field--span-2">
                    <span>é”™è¯¯åŸå› </span>
                    <textarea id="error-reason" name="errorReason" rows="2" placeholder="ç²—å¿ƒã€æ¦‚å¿µæ¨¡ç³Šç­‰"></textarea>
                </label>
                <label class="field field--span-2">
                    <span>é¢˜ç›®å†…å®¹ï¼ˆæ–‡å­—ï¼‰</span>
                    <textarea id="question-text" name="questionText" rows="3" placeholder="è¾“å…¥é¢˜å¹²æ–‡æœ¬"></textarea>
                </label>
                <label class="field">
                    <span>é¢˜ç›®å›¾ç‰‡</span>
                    <input type="file" id="question-image" name="questionImage" accept="image/*" />
                    <small>å¯ä¸Šä¼ é¢˜å¹²ç…§ç‰‡ã€‚</small>
                </label>
                <label class="field field--span-2">
                    <span>ç­”æ¡ˆï¼ˆæ–‡å­—ï¼‰</span>
                    <textarea id="answer-text" name="answerText" rows="3" placeholder="è¾“å…¥æ­£ç¡®ç­”æ¡ˆæˆ–è§£æ"></textarea>
                </label>
                <label class="field">
                    <span>ç­”æ¡ˆå›¾ç‰‡</span>
                    <input type="file" id="answer-image" name="answerImage" accept="image/*" />
                    <small>å¯ä¸Šä¼ ç­”æ¡ˆç…§ç‰‡ã€‚</small>
                </label>
                <button type="submit" class="btn btn-primary field--span-2">ä¿å­˜</button>
            </form>

            <div class="panel-footer">
                <button id="export-btn" class="btn" disabled>å¯¼å‡ºé€‰ä¸­ï¼ˆWordï¼‰</button>
                <label class="btn btn-secondary" for="import-input">Import Entries</label>
                <input type="file" id="import-input" accept="application/json" hidden />
                <button id="clear-btn" class="btn btn-danger">Clear All</button>
            </div>
        </section>

        <section class="panel" aria-labelledby="entries-title">
            <div class="panel-header">
                <div class="panel-header__top">
                    <h2 id="entries-title">é”™é¢˜åº“</h2>
                    <div class="panel-links">
                        <a href="#" id="open-entry-panel" class="panel-link" aria-controls="entry-panel" aria-expanded="false">æ–°çš„é”™é¢˜</a>
                        <a href="#" id="open-log-panel" class="panel-link" aria-controls="log-panel" aria-expanded="false">æŸ¥çœ‹æ´»åŠ¨æ—¥å¿—</a>
                    </div>
                </div>
                <div class="filters">
                    <label>
                        <span>æœç´¢</span>
                        <input type="search" id="search" placeholder="æœç´¢é¢˜ç›®ã€ç­”æ¡ˆæˆ–åŸå› " />
                    </label>
                    <label>
                        <span>é¢˜ç›®ç±»å‹</span>
                        <select id="type-filter">
                            <option value="">å…¨éƒ¨</option>
                        </select>
                    </label>
                    <label>
                        <span>å­¦ç§‘</span>
                        <select id="subject-filter">
                            <option value="">å…¨éƒ¨</option>
                        </select>
                    </label>
                    <label>
                        <span>å­¦æœŸ</span>
                        <select id="semester-filter">
                            <option value="">å…¨éƒ¨</option>
                        </select>
                    </label>
                    <label>
                        <span>æ¥æº</span>
                        <select id="source-filter">
                            <option value="">å…¨éƒ¨</option>
                        </select>
                    </label>
                    <label>
                        <span>é”™è¯¯åŸå› </span>
                        <select id="error-reason-filter">
                            <option value="">å…¨éƒ¨</option>
                        </select>
                    </label>
                    <label>
                        <span>èµ·å§‹æ—¥æœŸ</span>
                        <input type="date" id="date-start" />
                    </label>
                    <label>
                        <span>ç»“æŸæ—¥æœŸ</span>
                        <input type="date" id="date-end" />
                    </label>
                    <div class="filters__quick-links" role="group" aria-label="å¸¸ç”¨ç­›é€‰">
                        <span>å¿«æ·ï¼š</span>
                        <a href="#" id="math-shortcut" class="filters__quick-link">æ•°å­¦</a>
                    </div>
                </div>
            </div>

            <div id="stats" class="stats" role="status" aria-live="polite"></div>
            <div class="selection-toolbar">
                <p id="selection-status" class="selection-status" role="status" aria-live="polite">No entries selected.</p>
                <div class="selection-toolbar__actions">
                    <button type="button" id="select-filtered-btn" class="btn btn-secondary btn-compact">Select Filtered</button>
                    <button type="button" id="clear-selection-btn" class="btn btn-secondary btn-compact" disabled>Clear Selection</button>
                </div>
            </div>
            <div id="entries" class="entries" aria-live="polite"></div>
        </section>

        <section class="panel panel--log" id="log-panel" aria-labelledby="activity-log-title" hidden>
            <div class="panel-header panel-header--log">
                <div>
                    <h2 id="activity-log-title">Activity Log</h2>
                    <p>Track uploads, edits, deletes, and imports in real time.</p>
                </div>
                <div class="log-controls">
                    <button id="refresh-log-btn" class="btn btn-secondary" type="button">Refresh log</button>
                    <span id="log-status" class="log-status" role="status" aria-live="polite"></span>
                    <a href="#" id="close-log-panel" class="panel-link panel-link--muted">è¿”å›é”™é¢˜åˆ—è¡¨</a>
                </div>
            </div>
            <ol id="activity-log" class="log-list" aria-live="polite"></ol>
        </section>
    </main>

    <template id="entry-template">
        <article class="entry-card" data-id="">
            <header class="entry-header">
                <div class="entry-select-area">
                    <input type="checkbox" class="entry-select-input" aria-label="Select entry" />
                </div>
                <div class="entry-header__details">
                    <h3 class="entry-title"></h3>
                    <p class="entry-meta"></p>
                </div>
                <menu class="entry-actions" aria-label="Entry actions">
                    <button class="btn-icon" data-action="similar" title="Find similar exercises">ğŸ”</button>
                    <button class="btn-icon" data-action="edit" title="Edit">âœï¸</button>
                    <button class="btn-icon" data-action="delete" title="Delete">ğŸ—‘ï¸</button>
                </menu>
            </header>
            <section class="entry-content">
                <div class="entry-section entry-section--question">
                    <h4>é¢˜ç›®</h4>
                    <p class="entry-question-text"></p>
                    <figure class="entry-question-image"></figure>
                </div>
                <div class="entry-section entry-section--answer">
                    <h4>ç­”æ¡ˆ</h4>
                    <p class="entry-answer-text"></p>
                    <figure class="entry-answer-image"></figure>
                </div>
                <p class="entry-error-reason"></p>
            </section>
            <footer class="entry-footer">
                <p class="entry-timestamp"></p>
                <div class="entry-similar" hidden>
                    <h4>Similar exercises</h4>
                    <ul></ul>
                </div>
            </footer>
        </article>
    </template>

    <dialog id="edit-dialog">
        <form method="dialog" id="edit-form" class="form-grid">
            <h2>Edit Entry</h2>
            <input type="hidden" id="edit-id" />
            <label class="field">
                <span>æ¥æº</span>
                <input type="text" id="edit-source" />
            </label>
            <label class="field">
                <span>å­¦ç§‘</span>
                <input type="text" id="edit-subject" list="subject-options" />
            </label>
            <label class="field">
                <span>å­¦æœŸ</span>
                <select id="edit-semester">
                    <option value="">è¯·é€‰æ‹©</option>
                    <option value="å…«ä¸Š">å…«ä¸Š</option>
                    <option value="å…«ä¸‹">å…«ä¸‹</option>
                    <option value="ä¹ä¸Š">ä¹ä¸Š</option>
                    <option value="ä¹ä¸‹">ä¹ä¸‹</option>
                </select>
            </label>
            <label class="field">
                <span>é¢˜ç›®ç±»å‹</span>
                <input type="text" id="edit-question-type" />
            </label>
            <label class="field field--span-2">
                <span>åˆ›å»ºæ—¥æœŸ</span>
                <input type="date" id="edit-created-at" />
            </label>
            <label class="field field--span-2">
                <span>é”™è¯¯åŸå› </span>
                <textarea id="edit-error-reason" rows="2"></textarea>
            </label>
            <label class="field field--span-2">
                <span>é¢˜ç›®å†…å®¹ï¼ˆæ–‡å­—ï¼‰</span>
                <textarea id="edit-question-text" rows="3"></textarea>
            </label>
            <label class="field field--span-2">
                <span>ç­”æ¡ˆï¼ˆæ–‡å­—ï¼‰</span>
                <textarea id="edit-answer-text" rows="3"></textarea>
            </label>
            <menu class="dialog-actions">
                <button value="cancel" class="btn">Cancel</button>
                <button value="confirm" class="btn btn-primary">Save changes</button>
            </menu>
        </form>
    </dialog>

    <dialog id="confirm-clear">
        <form method="dialog" class="confirm-dialog">
            <h2>Delete all entries?</h2>
            <p>This action will remove every saved mistake. You can export a backup before clearing.</p>
            <menu class="dialog-actions">
                <button value="cancel" class="btn">Cancel</button>
                <button value="confirm" class="btn btn-danger">Delete</button>
            </menu>
        </form>
    </dialog>

    <datalist id="subject-options">
        <option value="æ•°å­¦"></option>
        <option value="è‹±è¯­"></option>
        <option value="è¯­æ–‡"></option>
        <option value="ç‰©ç†"></option>
        <option value="åŒ–å­¦"></option>
        <option value="ç”Ÿç‰©"></option>
        <option value="å†å²"></option>
        <option value="åœ°ç†"></option>
        <option value="æ”¿æ²»"></option>
        <option value="ç§‘å­¦"></option>
    </datalist>

    <script src="app.js" type="module"></script>
</body>
</html>
